{% extends 'base.html' %}

{% block title %}Admin2 Finance{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Finance Overview</h2>
  <p>Balance: {{ balance }}</p>

  <h4 class="mt-3">Recent Transactions</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Title</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Date</th>
        <th>Balance After</th>
      </tr>
    </thead>
    <tbody>
      {% for t in transactions %}
      <tr>
        <td>{{ t.title }}</td>
        <td>{{ t.trans_type }}</td>
        <td>{{ t.amount }}</td>
        <td>{{ t.created_at }}</td>
        <td>{{ t.balance_after }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5">No transactions</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <h4 class="mt-4">Recent Salaries</h4>
  <table class="table table-sm">
    <thead>
      <tr>
        <th>Staff</th>
        <th>Amount</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      {% for s in salaries %}
      <tr>
        <td>{{ s.staff.profile.user.username }}</td>
        <td>{{ s.amount }}</td>
        <td>{{ s.paid_on }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="3">No salary records</td>
      </tr>
      {% endfor %}


    </tbody>
  </table>
  <div class="d-flex gap-2">
    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="window.history.back();">Back</button>
    <a class="btn btn-sm btn-outline-danger" href="{% url 'role_redirect' %}">Cancel</a>
  </div>
</div>
{% endblock %}